<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Residential - Leaflet Application</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- Load Leaflet from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
  
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

  <!-- Load Esri Leaflet from CDN -->
  
  <script src="https://unpkg.com/esri-leaflet@2.5.3/dist/esri-leaflet.js"
    integrity="sha512-K0Vddb4QdnVOAuPJBHkgrua+/A9Moyv8AQEWi0xndQ+fqbRfAFd47z4A9u1AW/spLO0gEaiE1z98PK1gl5mC5Q=="
    crossorigin=""></script>
  
  <link rel ="stylesheet" href="index.css"/>

 <!-- Load Esri Leaflet Geocoder from CDN -->
 <!--https://esri.github.io/esri-leaflet/examples/search-map-service.html-->

 <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.css"
 integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
 crossorigin="">

 <!--Popup Form css Files-->
 <link rel = "stylesheet" href = "../css/popup_form.css"/>


<script src="https://unpkg.com/esri-leaflet-geocoder@2.3.3/dist/esri-leaflet-geocoder.js"
 integrity="sha512-HrFUyCEtIpxZloTgEKKMq4RFYhxjJkCiF5sDxuAokklOeZ68U2NPfh4MFtyIVWlsKtVbK5GD2/JzFyAfvT5ejA=="
 crossorigin=""></script>


 <!--Allowing Element drag leaflet-->
 <script src="https://unpkg.com/leaflet.path.drag@0.0.6/src/Path.Drag.js"></script>
<script src="https://unpkg.com/leaflet-editable@1.2.0/src/Leaflet.Editable.js"></script>

<!-- Drawing items Leaflet-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>


<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.mapbox.css' rel='stylesheet' />
<!--[if lt IE 9]>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.ie.css' rel='stylesheet' />
<![endif]-->
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/css/font-awesome.min.css' rel='stylesheet' />

<!--Database Content-->
<script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script>

</head>
<body>


<div id="map"></div>
<!-- <div id = "toolbar"></div> -->

  <!-- Adding the Popup Feature-->

  <!-- <button id="openBtn" class="open-button">Open Form</button> -->
  <div class="form-popup" id="myForm">
    <div class="form-container">
      <h2>Edit Metadata Info</h2>
  
      <!-- <label for="email"><b>Email</b></label>
      <input type="text" placeholder="Enter Email" name="email" required>
  
      <label for="psw"><b>Password</b></label>
      <input type="password" placeholder="Enter Password" name="psw" required> -->
  
      <label for="input_name"><b>Name</b></label>
      <input id="input_name" type="text" placeholder="The feature name" name="input_name" required>
  
      <!-- <label for="input_type"><b>Type</b></label>
      <input id="input_type" type="text" placeholder="Feature type" name="input_type"> -->
  
  
      <label for="input_date"><b>Date</b></label>
      <input id="input_date" type="date" placeholder="Current date" name="input_date" required></br></br>
  
      <!-- <label for="input_uuid"><b>UUID</b></label>
      <input id="input_uuid" type="text" placeholder="" name="input_uuid" required> -->
  
      <label for="input_description"><b>Description</b></label>
      <input id="input_description" type="text" placeholder="Contribution Description..." name="input_description" required>
  
      <button id="addBtn" class="btn cancel">Update Information</button>
      <!-- <button type="button" id ="closeBtn" class="btn cancel">Close</button> -->
    </div>
  </div>


<script type="module" src ="index.js"></script>
<script type="module" src="../js/popup_form.js"></script>

</body>
    
</html>







<!--Old Info-->
<!-- <script type="text/javascript">
    // make sure double clicking the map *only* triggers the editing workflow
    // var map = L.map('map', {
    //   editable: true,
    //   doubleClickZoom: false
    // }).setView([37.345, -110.875], 5);

    //Valid Maps
    // "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", 
    //"Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", 
    //"ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", 
    //ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo

    // let layer = L.esri.basemapLayer('Topographic').addTo(map);


    // ///////////////////////////////////////////////////////////////////////////////////////////////
    // // Switch Between Base Maps
    // // Might Put this in a new file
    // var layerLabels;

    // function setBasemap (basemap) {
    //     if (layer) {
    //     map.removeLayer(layer);
    //     }

    //     layer = L.esri.basemapLayer(basemap);

    //     map.addLayer(layer);

    //     if (layerLabels) {
    //     map.removeLayer(layerLabels);
    //     }

    //     if (
    //     basemap === 'ShadedRelief' ||
    //     basemap === 'Oceans' ||
    //     basemap === 'Gray' ||
    //     basemap === 'DarkGray' ||
    //     basemap === 'Terrain'
    //     ) {
    //         layerLabels = L.esri.basemapLayer(basemap + 'Labels');
    //         map.addLayer(layerLabels);
    //     } else if (basemap.includes('Imagery')) {
    //         layerLabels = L.esri.basemapLayer('ImageryLabels');
    //         map.addLayer(layerLabels);
    //     }
    // }

    // document.querySelector('#basemaps').addEventListener('change', function (e) {
    //     var basemap = e.target.value;
    //     setBasemap(basemap);
    // });


    // ///////////////////////////////////////////////////////////////////////////////////////////////


    ///////////////////////////////////////////////////////////////////////////////////////////////
    // Geocoding Search Bar
    // var arcgisOnline = L.esri.Geocoding.arcgisOnlineProvider();

    // L.esri.Geocoding.geosearch({
    //     providers: [
    //     arcgisOnline,
    //     L.esri.Geocoding.mapServiceProvider({
    //         label: 'States and Counties',
    //         url: 'https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer',
    //         layers: [2, 3],
    //         searchFields: ['NAME', 'STATE_NAME']
    //     })
    //     ]
    // }).addTo(map);

    ///////////////////////////////////////////////////////////////////////////////////////////////

    
    




    /////////////////////////////////////////////////////////////////////////////////////////////////
    // Create editable Features in Leaflet 


    // create a feature layer and add it to the map
    // var wildfireDistricts = L.esri.featureLayer({
    //   url: 'https://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/FeatureServer/2'
    // }).addTo(map);

    // // create a generic control to invoke editing
    // L.EditControl = L.Control.extend({
    //   options: {
    //     position: 'topleft',
    //     callback: null,
    //     kind: '',
    //     html: ''
    //   },

    //   // when the control is added to the map, wire up its DOM dynamically and add a click listener
    //   onAdd: function (map) {
    //     var container = L.DomUtil.create('div', 'leaflet-control leaflet-bar');
    //     var link = L.DomUtil.create('a', '', container);
    //     link.href = '#';
    //     link.title = 'Create a new ' + this.options.kind;
    //     link.innerHTML = this.options.html;
    //     L.DomEvent
    //       .on(link, 'click', L.DomEvent.stop)
    //       .on(link, 'click', function () {
    //         window.LAYER = this.options.callback.call(map.editTools);
    //       }, this);
    //     return container;
    //   }
    // });

    // // extend the control to draw polygons
    // L.NewPolygonControl = L.EditControl.extend({
    //   options: {
    //     position: 'topleft',
    //     callback: map.editTools.startPolygon,
    //     kind: 'polygon',
    //     html: '▰'
    //   }
    // });

    // // extend the control to draw rectangles
    // L.NewRectangleControl = L.EditControl.extend({
    //   options: {
    //     position: 'topleft',
    //     callback: map.editTools.startRectangle,
    //     kind: 'rectangle',
    //     html: '⬛'
    //   }
    // });

    // // add the two new controls to the map
    // map.addControl(new L.NewPolygonControl());
    // map.addControl(new L.NewRectangleControl());

    // // when users CMD/CTRL click an active editable feature,
    // // remove it from the map and delete it from the service
    // wildfireDistricts.on('click', function (e) {
    //   if ((e.originalEvent.ctrlKey || e.originalEvent.metaKey) && e.layer.editEnabled()) {
    //     // delete expects an id, not the whole geojson object
    //     wildfireDistricts.deleteFeature(e.layer.feature.id);
    //   }
    // });

    // // when users double click a graphic, toggle its editable status
    // // but when deselecting via double click, pass the geometry update to the service
    // wildfireDistricts.on('dblclick', function (e) {
    //   e.layer.toggleEdit();
    //   if (!e.layer.editEnabled()) {
    //     wildfireDistricts.updateFeature(e.layer.toGeoJSON());
    //   }
    // });

    // // when a new feature is drawn using one of the custom controls,
    // // pass the edit to the featureLayer service
    // console.log(map._layers)

    // map.on('editable:drawing:commit', function (e) {
    //   wildfireDistricts.addFeature(e.layer.toGeoJSON(), function (error, response) {
    //     if (error || !response.success) {
    //       console.log(error, response);
    //     }

    //     // now that the L.esri.featureLayer instance will manage this new feature,
    //     // remove any temporary features from the map that were created by the Editable plugin
    //     map.editTools.featuresLayer.clearLayers();
    //   });

    //   // disable editing
    //   e.layer.toggleEdit();
    // });
    ///////////////////////////////////////////////////////////////////////////////////////////
</script> -->